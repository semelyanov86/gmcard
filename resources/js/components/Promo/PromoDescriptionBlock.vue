<script setup lang="ts">
import { onMounted, ref } from 'vue';
import ToggleSwitch from './ToggleSwitch.vue';

const textEditorOpen = ref(false);

const emit = defineEmits<{
    openConditionsModal: [];
}>();

onMounted(() => {
    if (!(window as any).ClassicEditor) {
        const script = document.createElement('script');
        script.src = 'https://cdn.ckeditor.com/ckeditor5/35.3.0/classic/ckeditor.js';
        script.onload = () => {
            initializeEditors();
        };
        document.head.appendChild(script);
    } else {
        initializeEditors();
    }
});

function initializeEditors() {
    const ClassicEditor = (window as any).ClassicEditor;
    ['#editor', '#editor2'].forEach((selector) => {
        const element = document.querySelector(selector);
        if (element) {
            ClassicEditor.create(element).catch((error: any) => console.error(`Error initializing ${selector}:`, error));
        }
    });
}
</script>

<template>
    <div class="mt-8 flex w-full flex-col rounded-2xl bg-white p-8 max-md:p-4">
        <h3 class="mb-4 font-bold">–û–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ü–∏–∏</h3>
        <textarea id="editor" class="h-[200px] w-full">
‚ú® ¬´-30% –Ω–∞ –≤—Å—ë –æ—Ç Desigual¬ª ‚ú®<br><br>–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —è—Ä–∫–æ–º—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –≥–∞—Ä–¥–µ—Ä–æ–±–∞! –ë—Ä–µ–Ω–¥ Desigual –¥–∞—Ä–∏—Ç –≤–∞–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –ª—é–±—É—é –≤–µ—â—å –∏–∑ —Å–≤–æ–µ–≥–æ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π 30%.<br><br>üóìÔ∏è –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∞–∫—Ü–∏–∏: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Å [–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –Ω–∞—á–∞–ª–∞ –∞–∫—Ü–∏–∏] –ø–æ [–£–∫–∞–∂–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞]. –£—Å–ø–µ–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è!<br><br>üõçÔ∏è –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∞–∫—Ü–∏—é: –°–∫–∏–¥–∫–∞ 30% —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ Desigual:<br>–û–¥–µ–∂–¥–∞: –ø–ª–∞—Ç—å—è, —é–±–∫–∏, –±—Ä—é–∫–∏, –¥–∂–∏–Ω—Å—ã, –∫—É—Ä—Ç–∫–∏, –ø–∞–ª—å—Ç–æ, —Ñ—É—Ç–±–æ–ª–∫–∏, —Ä—É–±–∞—à–∫–∏, —Å–≤–∏—Ç–µ—Ä–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ –¥–ª—è –º—É–∂—á–∏–Ω –∏ –∂–µ–Ω—â–∏–Ω.<br>–û–±—É–≤—å: –∫—Ä–æ—Å—Å–æ–≤–∫–∏, –±–æ—Ç–∏–Ω–∫–∏, —Å–∞–ø–æ–≥–∏, —Ç—É—Ñ–ª–∏, —Å–∞–Ω–¥–∞–ª–∏–∏.<br>–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã: —Å—É–º–∫–∏, —Ä—é–∫–∑–∞–∫–∏, —à–∞—Ä—Ñ—ã, –≥–æ–ª–æ–≤–Ω—ã–µ —É–±–æ—Ä—ã, —É–∫—Ä–∞—à–µ–Ω–∏—è, —Ä–µ–º–Ω–∏.<br>–ò –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–∞ Desigual.<br><br><br>üìç –ì–¥–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –∞–∫—Ü–∏—è:<br>–û–Ω–ª–∞–π–Ω: –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ Desigual [—É–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ].<br>–û—Ñ—Ñ–ª–∞–π–Ω: –≤–æ –≤—Å–µ—Ö —Ñ–∏—Ä–º–µ–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö Desigual, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ [—É–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ —Ä–µ–≥–∏–æ–Ω—ã, –≥–¥–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –∞–∫—Ü–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä: "–ú–æ—Å–∫–≤–µ –∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ"].<br><br><br>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:<br>–°–∫–∏–¥–∫–∞ 30% –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –∏–ª–∏ –Ω–∞ –∫–∞—Å—Å–µ.<br>–ê–∫—Ü–∏—è –Ω–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∫–∏–¥–∫–∞–º–∏, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏.<br>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ.<br>–í–æ–∑–≤—Ä–∞—Ç –∏ –æ–±–º–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –º–∞–≥–∞–∑–∏–Ω–∞.<br>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∞–∫—Ü–∏–∏ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∏–ª–∏ –¥–æ—Å—Ä–æ—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∞–∫—Ü–∏—é.<br>–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ —à–∞–Ω—Å –¥–æ–±–∞–≤–∏—Ç—å –∫—Ä–∞—Å–æ–∫ –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å —Å Desigual! üíñ</textarea
        >
        <div class="my-6">
            <div class="h-[1px] w-full bg-black/30"></div>
            <div class="my-4 flex flex-row items-center justify-between max-md:flex-col max-md:items-start">
                <p class="all_text mr-10 text-black/50 max-md:mr-0 max-md:mb-4">
                    <strong class="text-base text-black">–î–æ–ø–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.</strong>
                    –ï—Å–ª–∏ –ø–æ –≤–∞—à–µ–π –∞–∫—Ü–∏–∏ –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –æ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–º –∑–∞—è–≤–∏—Ç—å - –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –Ω–∏–∂–µ. –ï—Å–ª–∏
                    –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –Ω–µ—Ç, —Ç–æ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º.
                    <span @click="emit('openConditionsModal')" class="ml-3 cursor-pointer text-[#2578cf] hover:underline">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</span>
                </p>
                <ToggleSwitch v-model="textEditorOpen" />
            </div>
        </div>
        <div v-show="textEditorOpen" class="mb-4">
            <div class="h-[1px] w-full bg-black/30"></div>
            <textarea id="editor2" class="min-h-[200px] w-full"></textarea>
        </div>
    </div>
</template>

<style>
.ck-editor__editable {
    min-height: 200px;
}
</style>
